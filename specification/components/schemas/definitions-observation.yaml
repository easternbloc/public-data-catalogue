type: object
required:
- observedNode
- measuredValue
- observationDate
- measuredProperty
additionalProperties: false
properties:
  observedNode:
    # "$id": "#/properties/observation/observedNode"
    title: Statistical Population
    # "$comment": https://schema.org/observedNode
    # HDR UK SCHEMA FAIL: Schema object cannot have additionalProperty: examples. SWK amended field too 'example' (matches pds api)
    example:
    - PERSONS
    description: Please select one of the following statistical populations for
          you observation
    allOf:
    - "$ref": "common-definitions/common.vocab.schema.yaml#/definitions/statisticalPopulationConstrained"
    # - "$ref": "valuesets/statisticalPopulationConstrained.yaml"
  measuredValue:
    # "$id": "#/properties/observation/measuredValue"
    title: Measured Value
    # "$comment": https://schema.org/measuredValue
    description: 'Please provide the population size associated with the population
          type the dataset i.e. 1000 people in a study, or 87 images (MRI) of Knee
          Usage Note: Used with Statistical Population, which specifies the type of
          the population in the dataset.'
    type: integer
  disambiguatingDescription:
    # "$id": "#/properties/observation/disambiguatingDescription"
    title: Disambiguating Description
    # "$comment": 'https://schema.org/disambiguatingDescription '
    description: If SNOMED CT term does not provide sufficient detail, please
          provide a description that disambiguates the population type.
    allOf:
    - "$ref": "common-definitions/common.schema.yaml#/definitions/abstractText"    
    # - "$ref": "definitions-abstractText.yaml"     
  observationDate:
    # "$id": "#/properties/observation/observationDate"
    # HDR UK SCHEMA FAIL: expected object to have property 'type'. Fails on 'default:' field. SWK added property 'type: string'
    type: string
    title: Observation Date
    # "$comment": https://schema.org/observationDate
    default: release date
    description: Please provide the date that the observation was made. Some datasets
          may be continuously updated and the number of records will change regularly,
          so the observation date provides users with the date that the analysis or
          query was run to generate the particular observation. Multiple observations
          can be made i.e. an observation of cumulative COVID positive cases by specimen
          on the 1/1/2021 could be 2M. On the 8/1/2021 a new observation could be
          2.1M. Users can add multiple observations.
    anyOf:
    - type: string
      format: date
    - type: string
      format: date-time    
  measuredProperty:
    # "$id": "#/properties/observation/measuredProperty"
    # HDR UK SCHEMA FAIL: expected object to have property 'type'. Fails on 'default:' field. SWK added property 'type: string'
    type: string
    title: Measured Property
    # "$comment": https://schema.org/measuredProperty
    default: COUNT
    description: Initially this will be defaulted to "COUNT"
    allOf:
    - type: string
      enum:
      - COUNT
      - Count
      - count