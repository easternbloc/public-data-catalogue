type: object
required:
  - name
  - contactPoint
title: Organisation Metadata
description: Describes an organisation for purposes of discovery and identification.
properties:
  identifier:
    # "$id": "#/organisation/identifier"
    title: Organisation Identifier
    description: 'Please provide a Grid.ac identifier (see https://www.grid.ac/institutes)
          for your organisation. If your organisation does not have a Grid.ac identifier
          please use the “suggest and institute” function here: https://www.grid.ac/institutes#'
    # "$comment": https://schema.org/identifier
    allOf:
    - "$ref": "common-definitions/common.schema.yaml#/definitions/url"  
    # - "$ref": "definitions-url.yaml"
  name:
    # "$id": "#/organisation/name"
    title: Organisation Name
    description: Name of the organisation
    # "$comment": https://schema.org/name
    allOf:
    - "$ref": "common-definitions/common.schema.yaml#/definitions/eightyCharacters" 
    # - "$ref": "definitions-eightyCharacters.yaml"  
  logo:
    # "$id": "#/organisation/logo"
    title: Organisation Logo
    description: Please provide a logo associated with the Gateway Organisation
          using a valid URL. The following formats will be accepted .jpg, .png or
          .svg.
    # "$comment": https://schema.org/logo
    allOf:
    - "$ref": "common-definitions/common.schema.yaml#/definitions/url"  
    # - "$ref": "definitions-url.yaml"
  description:
    # "$id": "#/organisation/description"
    title: Organisation Description
    description: Please provide a URL that describes the organisation.
    # "$comment": https://schema.org/description
    allOf:
     # FIXME: When using 'description' as object property openapi Specification schema invalid. expected 'common definitions schema' to be an object expected 'common definitions schema' to have type object. 
    # expected 'string' to be 'object'. This is because 'description' field is part of openapi spec
    # - "$ref": "common-definitions/common.schema.yaml#/description"
    - "$ref": "common-definitions/definitions-description.yaml"
  contactPoint:
    # "$id": "#/organisation/contactPoint"
    title: Organisation Contact Point
    description: Organisation contact point(s)
    # "$comment": https://schema.org/contactPoint
    anyOf:
    - "$ref": "common-definitions/common.schema.yaml#/definitions/emailAddress"
    # - "$ref": "definitions-emailAddress.yaml"
    - type: array
      items:
        allOf:
        - "$ref": "common-definitions/common.schema.yaml#/definitions/emailAddress"
        # - "$ref": "definitions-emailAddress.yaml"
  memberOf:
    # "$id": "#/organisation/memberOf"
    title: Organisation Membership
    description: Please indicate if the organisation is an Alliance Member or a Hub.      
    # "$comment": https://schema.org/memberOf
    allOf:
    - "$ref": "common-definitions/common.vocab.schema.yaml#/definitions/memberOf.yaml"    
    # - "$ref": "valuesets/memberOf.yaml"  
  accessRights:
    # "$id": "#/organisation/accessRights"
    title: Organisation Default Access Rights
    # "$comment": dct:access_rights
    description: The URL of a webpage where the data access request process and/or
          guidance is provided. If there is more than one access process i.e. industry
          vs academic please provide both.
    anyOf:
    - "$ref": "common-definitions/common.schema.yaml#/definitions/url"  
    # - "$ref": "definitions-url.yaml"
    - type: array
      items:
        allOf:
        - "$ref": "common-definitions/common.schema.yaml#/definitions/url"  
        # - "$ref": "definitions-url.yaml"
  deliveryLeadTime:
    # "$id": "#/organisation/deliveryLeadTime"
    title: Access Request Duration
    # "$comment": https://schema.org/deliveryLeadTime
    description: 'Please provide an indication of the typical processing times
          based on the types of requests typically received. Note: This value will
          be used as default access request duration for all datasets submitted by
          the organisation. However, there will be the opportunity to overwrite this
          value for each dataset.'
    allOf:
    - "$ref": "common-definitions/common.vocab.schema.yaml#/definitions/deliveryLeadTime"      
    # - "$ref": "valuesets/deliveryLeadTime.yaml" 
  accessService:
    # "$id": "#/organisation/accessService"
    title: Organisation Access Service
    # "$comment": dcat:accessService
    # HDR UK SCHEMA FAIL: Schema object cannot have additionalProperty: examples. SWK amended field too 'example' (matches pds api)
    example: https://cnfl.extge.co.uk/display/GERE/Research+Environment+User+Guide
    # - https://cnfl.extge.co.uk/display/GERE/Research+Environment+User+Guide
    description: 'Please provide a brief description of the data access services
          that are available including: environment that is currently available to
          researchers;additional consultancy and services;any indication of costs
          associated. If no environment is currently available, please indicate the
          current plans and timelines when and how data will be made available to
          researchers Note: This value will be used as default access environment
          for all datasets submitted by the organisation. However, there will be the
          opportunity to overwrite this value for each dataset.'
    allOf:
    - "$ref": "common-definitions/common.schema.yaml#/definitions/longDescription"
    # - "$ref": "definitions-longDescription.yaml"    
  accessRequestCost:
    # "$id": "#/organisation/accessRequestCost"
    title: Organisation Access Request Cost
    # "$comment": No standard identified
    description: 'Please provide link(s) to a webpage or a short description detailing
          the commercial model for processing data access requests for the organisation
          (if available) Definition: Indication of commercial model or cost (in GBP)
          for processing each data access request by the data custodian.'
    anyOf:
    - "$ref": "common-definitions/common.schema.yaml#/definitions/shortDescription"
    # - "$ref": "definitions-shortDescription.yaml"
    - type: array
      items:
        allOf:
        - "$ref": "common-definitions/common.schema.yaml#/definitions/url"  
        # - "$ref": "definitions-url.yaml" 
  dataUseLimitation:
    # "$id": "#/organisation/dataUseLimitation"
    title: Data Use Limitation
    # "$comment": https://www.ebi.ac.uk/ols/ontologies/duo/terms?iri=http%3A%2F%2Fpurl.obolibrary.org%2Fobo%2FDUO_0000001
    description: 'Please provide an indication of consent permissions for datasets
          and/or materials, and relates to the purposes for which datasets and/or
          material might be removed, stored or used. Notes: where there are existing
          data-sharing arrangements such as the HDR UK HUB data sharing agreement
          or the NIHR HIC data sharing agreement this should be indicated within access
          rights. This value will be used as terms for all datasets submitted by the
          organisation. However, there will be the opportunity to overwrite this value
          for each dataset.'
    anyOf:
    - "$ref": "common-definitions/common.schema.yaml#/definitions/commaSeparatedValues"
    # - "$ref": "definitions-commaSeparatedValues.yaml"
    - type: array
      items:
        allOf:
        - "$ref": "common-definitions/common.vocab.schema.yaml#/definitions/dataUseLimitation"
        # - "$ref": "valuesets/dataUseLimitation.yaml"
      uniqueItems: true
      minItems: 1
  dataUseRequirements:
    # "$id": "#/organisation/dataUseRequirements"
    title: Data Use Requirements
    description: Please indicate fit here are any additional conditions set for
          use if any, multiple requirements may be provided. Please ensure that these
          restrictions are documented in access rights information.
    # "$comment": https://www.ebi.ac.uk/ols/ontologies/duo/terms?iri=http%3A%2F%2Fpurl.obolibrary.org%2Fobo%2FDUO_0000001
    anyOf:
    - "$ref": "common-definitions/common.schema.yaml#/definitions/commaSeparatedValues"
    # - "$ref": "definitions-commaSeparatedValues.yaml"
    - type: array
      items:
        allOf:
        - "$ref": "common-definitions/common.vocab.schema.yaml#/definitions/dataUseRequirements"
        # - "$ref": "valuesets/dataUseRequirements.yaml"
      uniqueItems: true
      minItems: 1        