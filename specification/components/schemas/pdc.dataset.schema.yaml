type: object
title: HDR UK Dataset Schema
description: HDR UK Dataset Metadata Schema
# version: 2.0.2
required:
# - persistentId
- identifier
- version
- revisions
- issued
- modified
- summary
- accessibility
# - observations

additionalProperties: false

properties:

  # persistentId:
  #   # SWK added to schema
  #   # type: string
  #   title: Dataset persistent identifier
  #   description: Dataset persistent identifier that is common across all dataset resource revisions
  #   anyOf:
  #   - "$ref": "pdc.dataset.definitions.schema.yaml#/definitions/uuidv4"
  #   - "$ref": "pdc.dataset.definitions.schema.yaml#/definitions/url"

  identifier:
    # "$id": "#/properties/identifier"
    title: Dataset identifier
    # "$comment": "http://purl.org/dc/terms/identifier"
    # examples:
    # - [ "226fb3f1-4471-400a-8c39-2b66d46a39b6", "https://web.www.healthdatagateway.org/dataset/226fb3f1-4471-400a-8c39-2b66d46a39b6"]
    description: System dataset identifier (logical identifier of the dataset resource assigned by the Central Metastore)
    anyOf:
    - "$ref": "pdc.dataset.definitions.schema.yaml#/definitions/uuidv4"
    - "$ref": "pdc.dataset.definitions.schema.yaml#/definitions/url"

  version:
    # "$id": "#/properties/version"
    title: Dataset Version
    description: Dataset metadata version
    "$ref": "pdc.dataset.definitions.schema.yaml#/definitions/semver"
    # example:
    # - "1.1.0"

  revisions:
    # "$id": "#/properties/revisions"
    title: Dataset Revisions
    description: Includes the Semantic Version of the dataset and URL endpoint to obtain the version. 
    type: array
    items:
      allOf:
      - "$ref": "pdc.dataset.definitions.schema.yaml#/definitions/revision"

  issued:
    # "$id": "#/properties/issued"
    title: Creation Date
    # "$comment": "dcat:issued"
    description: Dataset Metadata Creation Date
    type: string
    format: date-time
    example: 2020-08-05T14:35:59Z

  modified:
    # "$id": "#/properties/modified"
    title: Modification Date
    # "$comment": "dcat:modified"
    description: Dataset Metadata Modification Date
    type: string
    format: date-time
    example: 2021-01-28T14:15:46Z

  summary:
    # "$id": "#/properties/summary"
    title: Summary
    description: Summary metadata must be completed by Data Custodians onboarding
      metadata into the Innovation Gateway MVP.
    "$ref": "pdc.dataset.definitions.schema.yaml#/definitions/summary"

  documentation:
    # "$id": "#/properties/documentation"
    title: Documentation
    description: Documentation can include a rich text description of the dataset
      or links to media such as documents, images, presentations, videos or links
      to data dictionaries, profiles or dashboards. Organisations are required to
      confirm that they have permission to distribute any additional media.
    "$ref": "pdc.dataset.definitions.schema.yaml#/definitions/documentation"

  coverage:
    # "$id": "#/properties/coverage"
    title: Coverage
    description: This information includes attributes for geographical and temporal
      coverage, cohort details etc. to enable a deeper understanding of the dataset
      content so that researchers can make decisions about the relevance of the underlying
      data.
    "$ref": "pdc.dataset.definitions.schema.yaml#/definitions/coverage"

  provenance:
    # "$id": "#/properties/provenance"
    title: Provenance
    description: Provenance information allows researchers to understand data within
      the context of its origins and can be an indicator of quality, authenticity
      and timeliness.
    "$ref": "pdc.dataset.definitions.schema.yaml#/definitions/provenance"

  accessibility:
    # "$id": "#/properties/accessibility"
    title: Accessibility
    description: Accessibility information allows researchers to understand access,
      usage, limitations, formats, standards and linkage or interoperability with
      toolsets.
    "$ref": "pdc.dataset.definitions.schema.yaml#/definitions/accessibility"

  enrichmentAndLinkage:
    # "$id": "#/properties/enrichmentAndLinkage"
    title: Enrichment and Linkage
    description: This section includes information about related datasets that may
      have previously been linked, as well as indicating if there is the opportunity
      to link to other datasets in the future. If a dataset has been enriched and/or
      derivations, scores and existing tools are available this section allows providers
      to indicate this to researchers.
    "$ref": "pdc.dataset.definitions.schema.yaml#/definitions/enrichmentAndLinkage"

  observations:
    # "$id": "#/properties/observations"
    title: Observations
    # "$comment": https://schema.org/observation
      # BELOW code RMV from description value 
      # &lt;b&gt; Statistical Population 1 &lt;/b&gt;
      # type: StatisticalPopulation populationType: Persons numConstraints: 0 &lt;b&gt;
      # Statistical Population 2 &lt;/b&gt; type: StatisticalPopulation populationType:
      # Events numConstraints: 0 &lt;b&gt; Statistical Population 3 &lt;/b&gt; type:
      # StatisticalPopulation populationType: Findings numConstraints: 0 typeOf: Observation
      # observedNode: &lt;b&gt; Statistical Population 1 &lt;/b&gt; measuredProperty:
      # count measuredValue: 32937 observationDate: “2017”'
    description: |

      Multiple observations about the dataset may be provided and users
      are expected to provide at least one observation (1..*). We will be supporting
      the schema.org observation model (https://schema.org/Observation) with default
      values. Users will be encouraged to provide their own statistical populations as the project progresses. Examples: 

      | Statistical Population | Population Size  | Measured Property | Observation Date | Population Description |
      |------------------------| ---------------- | ----------------- | ---------------- | ---------------------- |
      | Persons                | 32937            | Count             | 2017             | Events relating to period between April - Sept 2017 |
      | Events                 | 14900000         | Count             | 15/01/2021       | Number of unique death registrations since 1993 in England and Wales |
      | Findings               | 17,891           | Count             | 2020-09-03       | Cancer Germline - Number of genomes |
 
      
    type: array
    items:
      allOf:
      - "$ref": "pdc.dataset.definitions.schema.yaml#/definitions/observation"

  # structuralMetadata:
  #    # structuralMetadata keyword NOT part of HDR UK Schema. Added by SWK
  #   # "$id": "#/properties/structuralMetadata" 
  #   # "$comment": "First phase includes only column level metadata, future versions will include value level attributes",
  #   title: Structural Metadata
  #   description: | 
  #     Descriptions of all tables and data elements that can be included in the dataset.

  #     WARNING: First phase includes only column level metadata, future versions will include value level attributes
  #   # THis Code is BROKEN
  #   # type: array
  #   # items:
  #   #   allOf:
  #   #   - "$ref": "pdc.dataset.definitions.schema.yaml#/definitions/structuralMetadataCount"
  #   #   - "$ref": "pdc.dataset.definitions.schema.yaml#/definitions/dataClasses"
  #   #   - "$ref": "pdc.dataset.definitions.schema.yaml#/definitions/dataElements"
  #   # type: object
  #   # items:
  #   # THis Code WOrks
  #   # allOf:
  #   # - "$ref": "pdc.dataset.definitions.schema.yaml#/definitions/structuralMetadata"
  #   type: array
  #   items:
  #     allOf:
  #     - "$ref": "pdc.dataset.definitions.schema.yaml#/definitions/dataClass"